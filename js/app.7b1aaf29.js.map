{"version":3,"file":"js/app.7b1aaf29.js","mappings":"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","sources":["webpack://dkp-tracker/./src/composables/useAuth.js","webpack://dkp-tracker/./src/components/LogIn.vue","webpack://dkp-tracker/./src/components/LogIn.vue?b9f7","webpack://dkp-tracker/./src/components/DkpModal.vue","webpack://dkp-tracker/./src/components/DkpModal.vue?2aa6","webpack://dkp-tracker/./src/components/DkpTable.vue","webpack://dkp-tracker/./src/components/DkpTable.vue?53cd","webpack://dkp-tracker/./src/components/PartyManager.vue","webpack://dkp-tracker/./src/components/PartyManager.vue?357b","webpack://dkp-tracker/./src/App.vue","webpack://dkp-tracker/./src/App.vue?7ccd","webpack://dkp-tracker/./src/main.js","webpack://dkp-tracker/webpack/bootstrap","webpack://dkp-tracker/webpack/runtime/chunk loaded","webpack://dkp-tracker/webpack/runtime/compat get default export","webpack://dkp-tracker/webpack/runtime/define property getters","webpack://dkp-tracker/webpack/runtime/global","webpack://dkp-tracker/webpack/runtime/hasOwnProperty shorthand","webpack://dkp-tracker/webpack/runtime/make namespace object","webpack://dkp-tracker/webpack/runtime/jsonp chunk loading","webpack://dkp-tracker/webpack/startup"],"sourcesContent":["import { ref, inject } from \"vue\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\n\r\nconst currentUser = ref(null);\r\nconst authInitialized = ref(false);\r\n\r\nlet authReadyResolver = null;\r\nconst authReady = new Promise((resolve) => {\r\n  authReadyResolver = resolve;\r\n});\r\n\r\nexport function useAuth() {\r\n  const auth = inject(\"auth\");\r\n\r\n  if (!auth) {\r\n    throw new Error(\"Firebase Auth not provided via inject!\");\r\n  }\r\n\r\n  // Initialize the auth listener if not already done\r\n  if (!authInitialized.value) {\r\n    onAuthStateChanged(auth, (user) => {\r\n      currentUser.value = user;\r\n      authInitialized.value = true;\r\n      if (authReadyResolver) {\r\n        authReadyResolver(true);\r\n      }\r\n    });\r\n  }\r\n\r\n  return {\r\n    auth,\r\n    currentUser,\r\n    authInitialized,\r\n    authReady,\r\n  };\r\n}\r\n","<template>\r\n  <v-container class=\"login-container d-flex align-center justify-center\">\r\n    <v-card class=\"login-card pa-8\" max-width=\"400\" width=\"100%\">\r\n      <v-card-title class=\"text-center mb-6\">\r\n        <h2 class=\"login-title\">The White Order</h2>\r\n        <div class=\"login-subtitle\">DKP Tracker Authentication</div>\r\n      </v-card-title>\r\n\r\n      <v-card-text>\r\n        <v-form @submit.prevent>\r\n          <v-text-field\r\n            v-model=\"email\"\r\n            label=\"Email\"\r\n            type=\"email\"\r\n            variant=\"outlined\"\r\n            class=\"mb-4 login-field\"\r\n            hide-details\r\n            prepend-inner-icon=\"mdi-email\"\r\n          />\r\n\r\n          <v-text-field\r\n            v-model=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            variant=\"outlined\"\r\n            class=\"mb-6 login-field\"\r\n            hide-details\r\n            prepend-inner-icon=\"mdi-lock\"\r\n          />\r\n\r\n          <div class=\"d-flex flex-column gap-3\">\r\n            <v-btn\r\n              @click=\"signIn\"\r\n              color=\"#1f9ee5\"\r\n              variant=\"elevated\"\r\n              size=\"large\"\r\n              block\r\n              class=\"login-btn\"\r\n              prepend-icon=\"mdi-login\"\r\n            >\r\n              Sign In\r\n            </v-btn>\r\n\r\n            <v-btn\r\n              @click=\"signUp\"\r\n              color=\"#1f9ee5\"\r\n              variant=\"outlined\"\r\n              size=\"large\"\r\n              block\r\n              class=\"signup-btn\"\r\n              prepend-icon=\"mdi-account-plus\"\r\n            >\r\n              Sign Up\r\n            </v-btn>\r\n          </div>\r\n\r\n          <v-alert\r\n            v-if=\"errorMsg\"\r\n            type=\"error\"\r\n            variant=\"tonal\"\r\n            class=\"mt-4\"\r\n            :text=\"errorMsg\"\r\n          />\r\n        </v-form>\r\n      </v-card-text>\r\n    </v-card>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref, inject } from \"vue\";\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n} from \"firebase/auth\";\r\nimport { ref as dbRef, set } from \"firebase/database\"; // Import for DB access\r\n\r\nexport default defineComponent({\r\n  name: \"LogIn\",\r\n  setup() {\r\n    const email = ref(\"\");\r\n    const password = ref(\"\");\r\n    const errorMsg = ref(null);\r\n\r\n    // Inject the Firebase Auth and DB instances\r\n    const auth = inject(\"auth\");\r\n    const db = inject(\"db\");\r\n\r\n    if (!auth || !db) {\r\n      console.error(\"Firebase Auth or Database not provided!\");\r\n      errorMsg.value = \"Authentication services not available.\";\r\n      return {}; // Return empty if services aren't available\r\n    }\r\n\r\n    const signUp = async () => {\r\n      errorMsg.value = null; // Clear previous errors\r\n      try {\r\n        const userCredential = await createUserWithEmailAndPassword(\r\n          auth,\r\n          email.value,\r\n          password.value\r\n        );\r\n        const user = userCredential.user;\r\n        const currentUid = user.uid;\r\n        console.log(\"User signed up! UID:\", currentUid);\r\n\r\n        // Store initial user data in Realtime Database\r\n        const userProfileRef = dbRef(db, `users/${currentUid}/profile`);\r\n        await set(userProfileRef, {\r\n          email: user.email,\r\n          createdAt: new Date().toISOString(),\r\n        });\r\n        console.log(\"User profile created in RTDB.\");\r\n      } catch (error) {\r\n        console.error(\"Error signing up:\", error.message);\r\n        errorMsg.value = error.message;\r\n      }\r\n    };\r\n\r\n    const signIn = async () => {\r\n      errorMsg.value = null; // Clear previous errors\r\n      try {\r\n        await signInWithEmailAndPassword(auth, email.value, password.value);\r\n        console.log(\"User signed in!\");\r\n      } catch (error) {\r\n        console.error(\"Error signing in:\", error.message);\r\n        errorMsg.value = error.message;\r\n      }\r\n    };\r\n\r\n    return { email, password, signUp, signIn, errorMsg };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  background-color: transparent;\r\n}\r\n\r\n.login-card {\r\n  background-color: #0a1025 !important;\r\n  border: #1f9ee5 2px solid;\r\n  box-shadow: #1f9ee5 0px 0px 15px 3px;\r\n  border-radius: 15px;\r\n}\r\n\r\n.login-title {\r\n  color: #eaf1ff !important;\r\n  font-weight: bold;\r\n  font-size: 1.8rem;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.login-subtitle {\r\n  color: #1f9ee5 !important;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.login-field :deep(.v-field) {\r\n  background-color: rgba(31, 158, 229, 0.05) !important;\r\n  border: #1f9ee5 1px solid;\r\n  border-radius: 8px;\r\n}\r\n\r\n.login-field :deep(.v-field--focused) {\r\n  border: #1f9ee5 2px solid;\r\n  box-shadow: #1f9ee5 0px 0px 8px 1px;\r\n}\r\n\r\n.login-field :deep(.v-field__input) {\r\n  color: #eaf1ff !important;\r\n}\r\n\r\n.login-field :deep(.v-label) {\r\n  color: #1f9ee5 !important;\r\n}\r\n\r\n.login-field :deep(.v-icon) {\r\n  color: #1f9ee5 !important;\r\n}\r\n\r\n.login-btn {\r\n  background-color: #1f9ee5 !important;\r\n  color: #eaf1ff !important;\r\n  font-weight: bold;\r\n  box-shadow: #1f9ee5 0px 0px 10px 2px;\r\n}\r\n\r\n.login-btn:hover {\r\n  background-color: #0d7cc7 !important;\r\n  transform: translateY(-2px);\r\n  box-shadow: #1f9ee5 0px 4px 15px 3px;\r\n}\r\n\r\n.signup-btn {\r\n  border: #1f9ee5 2px solid !important;\r\n  color: #1f9ee5 !important;\r\n  font-weight: bold;\r\n}\r\n\r\n.signup-btn:hover {\r\n  background-color: rgba(31, 158, 229, 0.1) !important;\r\n  transform: translateY(-2px);\r\n  box-shadow: #1f9ee5 0px 0px 10px 2px;\r\n}\r\n\r\n:deep(.v-alert) {\r\n  background-color: rgba(244, 67, 54, 0.1) !important;\r\n  border: #f44336 1px solid;\r\n  color: #ff6b6b !important;\r\n}\r\n\r\n:deep(.v-btn .v-icon) {\r\n  color: inherit !important;\r\n}\r\n</style>\r\n","import { render } from \"./LogIn.vue?vue&type=template&id=49ad6c2a&scoped=true\"\nimport script from \"./LogIn.vue?vue&type=script&lang=js\"\nexport * from \"./LogIn.vue?vue&type=script&lang=js\"\n\nimport \"./LogIn.vue?vue&type=style&index=0&id=49ad6c2a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-49ad6c2a\"]])\n\nexport default __exports__","<template>\r\n  <v-dialog\r\n    :model-value=\"show\"\r\n    @update:model-value=\"updateShow\"\r\n    max-width=\"500px\"\r\n  >\r\n    <v-card>\r\n      <v-card-title class=\"text-h5\">\r\n        <span>{{\r\n          item?.isNew ? \"Add New User\" : `${item?.user} Details`\r\n        }}</span>\r\n      </v-card-title>\r\n\r\n      <v-card-text>\r\n        <v-container>\r\n          <v-row justify=\"center\">\r\n            <v-col cols=\"12\">\r\n              <v-text-field\r\n                v-if=\"item\"\r\n                v-model=\"localUsername\"\r\n                label=\"Username\"\r\n                variant=\"outlined\"\r\n                class=\"mb-3\"\r\n              ></v-text-field>\r\n              <v-text-field\r\n                v-if=\"item\"\r\n                v-model.number=\"localDkp\"\r\n                label=\"DKP\"\r\n                type=\"number\"\r\n                variant=\"outlined\"\r\n                class=\"mb-3\"\r\n              ></v-text-field>\r\n              <v-text-field\r\n                v-if=\"item\"\r\n                v-model=\"localClass\"\r\n                label=\"Class\"\r\n                variant=\"outlined\"\r\n                class=\"mb-3\"\r\n              ></v-text-field>\r\n              <v-text-field\r\n                v-if=\"item\"\r\n                v-model=\"localLevel\"\r\n                label=\"Level\"\r\n                variant=\"outlined\"\r\n                class=\"mb-3\"\r\n              ></v-text-field>\r\n              <div class=\"text-subtitle-2 mb-2\">\r\n                Total Event Attendance: {{ attendanceCount }}\r\n              </div>\r\n            </v-col>\r\n            <v-col cols=\"12\" class=\"attendance-list pa-4\">\r\n              <v-list-subheader>Attendance by Event Type:</v-list-subheader>\r\n              <v-table dense>\r\n                <template #header>\r\n                  <tr>\r\n                    <th>Event Type</th>\r\n                    <th>Attendance Count</th>\r\n                  </tr>\r\n                </template>\r\n                <template #default>\r\n                  <tr v-for=\"(count, type) in attendanceByType\" :key=\"type\">\r\n                    <td>{{ type }}</td>\r\n                    <td>{{ count }}</td>\r\n                  </tr>\r\n                </template>\r\n              </v-table>\r\n            </v-col>\r\n          </v-row>\r\n        </v-container>\r\n      </v-card-text>\r\n\r\n      <v-card-actions>\r\n        <v-spacer></v-spacer>\r\n        <v-btn color=\"primary\" variant=\"text\" @click=\"updateShow(false)\">\r\n          Cancel\r\n        </v-btn>\r\n        <v-btn color=\"primary\" variant=\"text\" @click=\"saveChanges\">\r\n          Save\r\n        </v-btn>\r\n      </v-card-actions>\r\n    </v-card>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, computed, defineProps, defineEmits } from \"vue\";\r\nimport { ref as dbRef, set, get } from \"firebase/database\";\r\nimport { inject } from \"vue\";\r\n\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n  item: {\r\n    type: Object,\r\n    default: null,\r\n  },\r\n});\r\n\r\nconst emit = defineEmits([\"update:modelValue\", \"saved\"]);\r\n\r\n// Computed property for v-model handling\r\nconst show = computed({\r\n  get: () => props.modelValue,\r\n  set: (value) => emit(\"update:modelValue\", value),\r\n});\r\n\r\nconst updateShow = (value) => {\r\n  emit(\"update:modelValue\", value);\r\n};\r\n\r\n// Get database instance at setup time\r\nconst db = inject(\"db\");\r\nconst localDkp = ref(0);\r\nconst localUsername = ref(\"\");\r\nconst localClass = ref(\"\");\r\nconst localLevel = ref(\"\");\r\nconst attendanceCount = ref(0);\r\nconst attendanceByType = ref({});\r\nconst eventTypesToDisplay = [\r\n  \"Field Raids\",\r\n  \"Epics\",\r\n  \"Clan Hall/Fort\",\r\n  \"Call To Arms\",\r\n  \"Siege\",\r\n];\r\n\r\nconst fetchAttendanceCount = async () => {\r\n  if (!props.item || !db) return;\r\n\r\n  try {\r\n    const eventsRef = dbRef(db, \"events/\");\r\n    const snapshot = await get(eventsRef);\r\n\r\n    if (snapshot.exists()) {\r\n      const events = snapshot.val();\r\n\r\n      let total = 0;\r\n      // Initialize byType with all event types set to 0\r\n      const byType = {};\r\n      eventTypesToDisplay.forEach((type) => {\r\n        byType[type] = 0;\r\n      });\r\n\r\n      // Count events where this user was present, grouped by title\r\n      Object.values(events).forEach((event) => {\r\n        console.log(\r\n          \"Event:\",\r\n          event.messageTitle,\r\n          \"UsersAttended:\",\r\n          event.usersAttended\r\n        );\r\n        if (event.usersAttended) {\r\n          const title = event.messageTitle || \"Untitled Event\";\r\n          console.log(\r\n            \"Event title:\",\r\n            title,\r\n            \"Is in display list:\",\r\n            eventTypesToDisplay.includes(title)\r\n          );\r\n\r\n          // Only count events that are in our eventTypesToDisplay list\r\n          if (!eventTypesToDisplay.includes(title)) {\r\n            return;\r\n          }\r\n\r\n          // Check if any user in usersAttended matches our user's ID or username\r\n          const hasAttended = Object.values(event.usersAttended).some(\r\n            (user) => {\r\n              console.log(\"Checking user:\", user, \"against item:\", props.item);\r\n              return (\r\n                user.userId === props.item.id ||\r\n                user.userId === props.item.user ||\r\n                user.username === props.item.user ||\r\n                user.username === props.item.id\r\n              );\r\n            }\r\n          );\r\n\r\n          if (hasAttended) {\r\n            byType[title] = (byType[title] || 0) + 1;\r\n            total++;\r\n            console.log(\r\n              \"User attended event:\",\r\n              title,\r\n              \"New count:\",\r\n              byType[title]\r\n            );\r\n          }\r\n        }\r\n      });\r\n\r\n      console.log(\"Final attendance by type:\", byType);\r\n      console.log(\"Total attendance:\", total);\r\n      attendanceCount.value = total;\r\n      attendanceByType.value = byType;\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error fetching attendance:\", error);\r\n  }\r\n};\r\n\r\n// Watch for item changes to update local values\r\nwatch(\r\n  () => props.item,\r\n  async (newItem) => {\r\n    if (newItem) {\r\n      localDkp.value = newItem.dkp || 0;\r\n      localUsername.value = newItem.user || \"\";\r\n      localClass.value = newItem.class || \"\";\r\n      localLevel.value = newItem.level || \"\";\r\n      await fetchAttendanceCount();\r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\nconst saveChanges = async () => {\r\n  if (!props.item || !db || !localUsername.value) return;\r\n\r\n  try {\r\n    // For new users, use the username as the ID; for existing users, use the existing ID\r\n    const userId = props.item.isNew ? localUsername.value : props.item.id;\r\n    const userRef = dbRef(db, `dkp/${userId}`);\r\n\r\n    await set(userRef, {\r\n      user: localUsername.value,\r\n      dkp: Number(localDkp.value),\r\n      class: localClass.value || \"\",\r\n      level: localLevel.value || \"\",\r\n    });\r\n\r\n    emit(\"update:modelValue\", false);\r\n    emit(\"saved\");\r\n  } catch (error) {\r\n    console.error(\"Error saving user:\", error);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.v-card {\r\n  background-color: #0a1025 !important;\r\n  border: #1f9ee5 2px ridge;\r\n  box-shadow: #1f9ee5 0px 0px 30px 2px;\r\n  color: #eaf1ff;\r\n}\r\n\r\n.v-card-title {\r\n  color: #eaf1ff !important;\r\n  border-bottom: 1px solid #1f9ee5;\r\n}\r\n\r\n.attendance-list {\r\n  border-radius: 4px;\r\n  background-color: rgba(31, 158, 229, 0.05);\r\n  border: #1f9ee5 1px solid;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.v-text-field {\r\n  color: #eaf1ff !important;\r\n}\r\n\r\n.v-text-field:deep(input) {\r\n  color: #eaf1ff !important;\r\n}\r\n\r\n.v-text-field:deep(label) {\r\n  color: #1f9ee5 !important;\r\n}\r\n\r\n.v-text-field:deep(.v-field__outline) {\r\n  color: #1f9ee5 !important;\r\n}\r\n\r\n.v-table {\r\n  background-color: transparent !important;\r\n  color: #eaf1ff !important;\r\n}\r\n\r\n.v-table:deep(th) {\r\n  background-color: rgba(31, 158, 229, 0.1) !important;\r\n  color: #eaf1ff !important;\r\n  border-bottom: 1px solid #1f9ee5 !important;\r\n}\r\n\r\n.v-table:deep(td) {\r\n  color: #eaf1ff !important;\r\n  border-bottom: 1px solid rgba(31, 158, 229, 0.3) !important;\r\n}\r\n\r\n.v-btn {\r\n  color: #1f9ee5 !important;\r\n}\r\n\r\n.v-list-subheader {\r\n  color: #1f9ee5 !important;\r\n  font-weight: bold;\r\n}\r\n\r\n.text-subtitle-2 {\r\n  color: #eaf1ff !important;\r\n}\r\n</style>\r\n","import script from \"./DkpModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DkpModal.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DkpModal.vue?vue&type=style&index=0&id=040d4274&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-040d4274\"]])\n\nexport default __exports__","<template>\n  <v-card class=\"pa-4 mx-auto\" id=\"card-container\">\n    <template #title>\n      <div class=\"d-flex py-2\">\n        <h2 class=\"text-h4 font-weight-bold\">\n          The White Order Lineage 2 Users\n        </h2>\n      </div>\n      <hr />\n    </template>\n    <template v-slot:text>\n      <div class=\"search-container\">\n        <v-text-field\n          v-model=\"search\"\n          label=\"Search\"\n          variant=\"underlined\"\n          hide-details\n          single-line\n          class=\"search-field\"\n        >\n          <template #prepend-inner>\n            <v-icon color=\"#1f9ee5\">mdi-magnify</v-icon>\n          </template>\n        </v-text-field>\n      </div>\n    </template>\n\n    <v-data-table\n      hover\n      :headers=\"headers\"\n      :items=\"users\"\n      :search=\"search\"\n      fixed-header\n      class=\"table-container\"\n      density=\"comfortable\"\n    >\n      <!-- Using CSS-based grouping instead of template override to preserve sorting -->\n      <template #[`item.user`]=\"{ item }\">\n        <div class=\"d-flex align-center justify-center\">\n          <v-icon color=\"#1f9ee5\" class=\"me-2\">mdi-account</v-icon>\n          {{ item.user }}\n        </div>\n      </template>\n      <template #[`item.class`]=\"{ item }\">\n        <div class=\"text-center\">\n          {{ item.class || \"-\" }}\n        </div>\n      </template>\n      <template #[`item.level`]=\"{ item }\">\n        <div class=\"text-center\">\n          {{ item.level || \"-\" }}\n        </div>\n      </template>\n      <template #[`item.actions`]=\"{ item }\">\n        <v-btn\n          size=\"small\"\n          icon\n          variant=\"text\"\n          color=\"#1f9ee5\"\n          @click=\"openModal(item)\"\n        >\n          <v-icon>mdi-pencil</v-icon>\n        </v-btn>\n      </template>\n    </v-data-table>\n\n    <DkpModal v-model=\"dialog\" :item=\"selectedItem\" @saved=\"handleUserSaved\" />\n  </v-card>\n</template>\n<script setup>\nimport { ref, computed, defineProps, defineEmits } from \"vue\";\nimport DkpModal from \"./DkpModal.vue\";\n//eslint-disable-next-line no-unused-vars\nconst props = defineProps({\n  users: {\n    type: Array,\n    default: () => [],\n  },\n  events: {\n    type: Object,\n    default: () => ({}),\n  },\n  eventTypes: {\n    type: Array,\n    default: () => [],\n  },\n  attendanceData: {\n    type: Object,\n    default: () => ({}),\n  },\n});\n\nconst emit = defineEmits([\"user-updated\"]);\n\nconst search = ref(\"\");\nconst dialog = ref(false);\nconst selectedItem = ref(null);\n\nconst openModal = (item) => {\n  selectedItem.value = item;\n  dialog.value = true;\n};\n\nconst eventTypesToDisplay = [\n  \"Field Raids\",\n  \"Epics\",\n  \"Clan Hall/Fort\",\n  \"Call To Arms\",\n  \"Siege\",\n];\n\nconst headers = computed(() => {\n  const baseHeaders = [\n    {\n      align: \"center\",\n      key: \"user\",\n      sortable: true,\n      title: \"User Name\",\n      width: \"150px\",\n    },\n    {\n      key: \"class\",\n      align: \"center\",\n      title: \"Class\",\n      sortable: true,\n      width: \"120px\",\n    },\n    {\n      key: \"level\",\n      align: \"center\",\n      title: \"Level\",\n      sortable: true,\n      width: \"80px\",\n    },\n    {\n      key: \"dkp\",\n      align: \"center\",\n      title: \"DKP\",\n      width: \"100px\",\n      sortable: true,\n    },\n  ];\n  // Add headers for each event type\n  const eventHeaders = eventTypesToDisplay.map((type) => ({\n    key: `event_${type}`,\n    align: \"center\",\n    title: type,\n    sortable: true,\n    width: \"100px\",\n  }));\n\n  return [\n    ...baseHeaders,\n    ...eventHeaders,\n    {\n      key: \"actions\",\n      align: \"center\",\n      title: \"Actions\",\n      width: \"80px\",\n    },\n  ];\n});\n\nconst handleUserSaved = () => {\n  emit(\"user-updated\");\n};\n</script>\n\n<style scoped>\n.container {\n  margin: auto;\n  padding: 20px;\n}\n\nh2 {\n  color: #eaf1ff;\n  margin: 0;\n}\n\nhr {\n  border: #1f9ee5 1px solid;\n}\n\n.table-container {\n  overflow-x: auto;\n  width: 1300px;\n  margin-left: 50px;\n  background-color: transparent;\n}\n\n.v-table {\n  color: #eaf1ff;\n  background-color: #0a1025;\n  border: #1f9ee5 2px ridge;\n  box-shadow: #1f9ee5 0px 0px 7px 2px;\n  border-radius: 15px;\n  font-size: 1rem;\n  width: 1300px !important;\n}\n#card-container {\n  color: #eaf1ff;\n  background-color: transparent;\n}\n\n.custom-header {\n  background-color: #0a1025 !important;\n  color: #eaf1ff !important;\n  font-weight: bolder !important;\n  font-size: 1.1rem;\n}\n\n.group-header {\n  border-bottom: #1f9ee5 1px solid !important;\n}\n\n/* Style all table headers with our custom theme */\n:deep(.v-data-table thead tr th) {\n  background-color: #0a1025 !important;\n  color: #eaf1ff !important;\n  font-weight: bolder !important;\n  font-size: 1rem !important;\n  text-align: center !important;\n  border-bottom: #1f9ee5 2px solid !important;\n}\n\n:deep(.mdi-arrow-up),\n:deep(.mdi-arrow-down) {\n  color: #1f9ee5 !important;\n  opacity: 1 !important;\n  padding-left: 4px;\n}\n/* Additional specific selectors to ensure border shows */\n:deep(.v-data-table .v-table__wrapper table thead tr th) {\n  border-bottom: #1f9ee5 2px solid !important;\n}\n\n:deep(.v-data-table tbody tr:first-child td) {\n  border-top: #1f9ee5 1px solid !important;\n}\n\n:deep(.v-data-table .v-table__wrapper) {\n  position: relative;\n  margin-top: 30px;\n  overflow: auto !important;\n}\n\n.search-container {\n  display: flex;\n  justify-content: flex-start;\n  width: 100%;\n  margin-bottom: 20px;\n  padding-right: 16px;\n}\n\n.search-field {\n  max-width: 300px;\n  min-width: 300px;\n  background-color: transparent;\n  color: #eaf1ff;\n}\n\n.search-field:deep(input) {\n  color: #eaf1ff !important;\n}\n\n.search-field:deep(label) {\n  color: #1f9ee5 !important;\n}\n\n.search-field:deep(.v-input__prepend) {\n  color: #1f9ee5 !important;\n}\n\n.search-field:deep(.v-icon) {\n  color: #1f9ee5 !important;\n}\n\n:deep(.v-btn .v-icon),\n:deep(.v-text-field .v-icon) {\n  color: #1f9ee5 !important;\n}\n\n/* Vuetify 3 hover styling for data table rows */\n:deep(.v-data-table tbody tr:hover) {\n  background-color: rgba(31, 158, 229, 0.1) !important;\n}\n\n:deep(.v-data-table tbody tr:hover td) {\n  background-color: rgba(31, 158, 229, 0.1) !important;\n}\n</style>\n","import script from \"./DkpTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DkpTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DkpTable.vue?vue&type=style&index=0&id=9a51418a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9a51418a\"]])\n\nexport default __exports__","<template>\r\n  <v-container fluid class=\"pa-0\">\r\n    <v-row>\r\n      <v-col cols=\"12\">\r\n        <div class=\"d-flex justify-space-between align-center py-2\">\r\n          <h2 class=\"text-h4 font-weight-bold\">Party Members</h2>\r\n          <div class=\"d-flex align-center gap-4\">\r\n            <v-btn\r\n              @click=\"addParty\"\r\n              variant=\"tonal\"\r\n              color=\"#1f9ee5\"\r\n              prepend-icon=\"mdi-plus\"\r\n            >\r\n              Add Party\r\n            </v-btn>\r\n            <v-btn\r\n              @click=\"saveParties\"\r\n              variant=\"tonal\"\r\n              color=\"success\"\r\n              prepend-icon=\"mdi-content-save\"\r\n              :loading=\"saving\"\r\n              class=\"mx-4\"\r\n            >\r\n              Save Parties\r\n            </v-btn>\r\n            <span class=\"text-caption text-medium-emphasis\">\r\n              Use DKP Table to add/edit users\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <v-row>\r\n      <!-- Unassigned Users Pool -->\r\n      <v-col cols=\"12\" lg=\"3\">\r\n        <v-card class=\"party-card\" id=\"user-pool-card\">\r\n          <v-card-title class=\"text-center\">Available Users</v-card-title>\r\n          <v-card-text>\r\n            <draggable\r\n              v-model=\"unassignedUsers\"\r\n              group=\"users\"\r\n              item-key=\"username\"\r\n              class=\"user-pool\"\r\n            >\r\n              <template #item=\"{ element }\">\r\n                <v-card class=\"user-card mb-2\">\r\n                  <v-card-text class=\"d-flex align-center\">\r\n                    <div class=\"d-flex flex-column\">\r\n                      <div class=\"d-flex align-center\">\r\n                        <v-icon color=\"#1f9ee5\" class=\"me-2\"\r\n                          >mdi-account</v-icon\r\n                        >\r\n                        {{ element.username }}\r\n                      </div>\r\n                      <div\r\n                        class=\"user-details\"\r\n                        v-if=\"element.class || element.level\"\r\n                      >\r\n                        <span v-if=\"element.class\">{{ element.class }}</span>\r\n                        <span v-if=\"element.class && element.level\"> Â· </span>\r\n                        <span v-if=\"element.level\"\r\n                          >Level {{ element.level }}</span\r\n                        >\r\n                      </div>\r\n                    </div>\r\n                  </v-card-text>\r\n                </v-card>\r\n              </template>\r\n            </draggable>\r\n          </v-card-text>\r\n        </v-card>\r\n      </v-col>\r\n\r\n      <!-- Party Groups -->\r\n      <v-col cols=\"12\" lg=\"7\">\r\n        <v-row style=\"width: 100%\">\r\n          <v-col v-for=\"(party, index) in parties\" :key=\"index\" cols=\"4\">\r\n            <v-card class=\"party-card\">\r\n              <v-card-title class=\"text-center party-title-container\">\r\n                <div class=\"d-flex align-center justify-space-between w-100\">\r\n                  <v-text-field\r\n                    v-model=\"party.name\"\r\n                    variant=\"plain\"\r\n                    class=\"party-name-field\"\r\n                    hide-details\r\n                    density=\"compact\"\r\n                    @click.stop\r\n                  />\r\n                  <div class=\"d-flex align-center\">\r\n                    <span class=\"party-count me-2\"\r\n                      >({{ party.members.length }})</span\r\n                    >\r\n                    <v-btn\r\n                      icon\r\n                      size=\"small\"\r\n                      variant=\"text\"\r\n                      color=\"error\"\r\n                      @click=\"deleteParty(index)\"\r\n                    >\r\n                      <v-icon size=\"medium\">mdi-close</v-icon>\r\n                    </v-btn>\r\n                  </div>\r\n                </div>\r\n              </v-card-title>\r\n              <v-card-text>\r\n                <draggable\r\n                  v-model=\"party.members\"\r\n                  group=\"users\"\r\n                  item-key=\"username\"\r\n                  class=\"party-drop-zone\"\r\n                >\r\n                  <template #item=\"{ element }\">\r\n                    <v-card class=\"user-card mb-1\">\r\n                      <v-card-text class=\"d-flex align-center\">\r\n                        <div class=\"d-flex flex-column\">\r\n                          <div class=\"d-flex align-center\">\r\n                            <v-icon color=\"#1f9ee5\" class=\"me-2\"\r\n                              >mdi-account</v-icon\r\n                            >\r\n                            {{ element.username }}\r\n                          </div>\r\n                          <div\r\n                            class=\"user-details\"\r\n                            v-if=\"element.class || element.level\"\r\n                          >\r\n                            <span v-if=\"element.class\">{{\r\n                              element.class\r\n                            }}</span>\r\n                            <span v-if=\"element.class && element.level\">\r\n                              Â·\r\n                            </span>\r\n                            <span v-if=\"element.level\"\r\n                              >Level {{ element.level }}</span\r\n                            >\r\n                          </div>\r\n                        </div>\r\n                      </v-card-text>\r\n                    </v-card>\r\n                  </template>\r\n                </draggable>\r\n              </v-card-text>\r\n            </v-card>\r\n          </v-col>\r\n        </v-row>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n<script setup>\r\nimport { ref, defineProps, watch, inject, onMounted } from \"vue\";\r\nimport {\r\n  ref as dbRef,\r\n  set,\r\n  get,\r\n  query,\r\n  orderByKey,\r\n  limitToLast,\r\n} from \"firebase/database\";\r\nimport draggable from \"vuedraggable\";\r\n\r\nconst props = defineProps({\r\n  users: {\r\n    type: Array,\r\n    default: () => [],\r\n  },\r\n});\r\n\r\n// Get database instance\r\nconst db = inject(\"db\");\r\nconst saving = ref(false);\r\n\r\nconst unassignedUsers = ref([]);\r\nconst parties = ref([\r\n  { id: 1, name: \"Party 1\", members: [] },\r\n  { id: 2, name: \"Party 2\", members: [] },\r\n  { id: 3, name: \"Party 3\", members: [] },\r\n  { id: 4, name: \"Party 4\", members: [] },\r\n]);\r\n\r\n// Load latest party configuration from database\r\nconst loadLatestPartyConfiguration = async (allUsers) => {\r\n  if (!db) {\r\n    // If no database, just put everyone in unassigned\r\n    unassignedUsers.value = allUsers;\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const partiesRef = dbRef(db, \"parties\");\r\n    const latestQuery = query(partiesRef, orderByKey(), limitToLast(1));\r\n    const snapshot = await get(latestQuery);\r\n\r\n    if (snapshot.exists()) {\r\n      const data = snapshot.val();\r\n      const latestConfig = Object.values(data)[0]; // Get the most recent entry\r\n\r\n      console.log(\"Loading saved party configuration:\", latestConfig);\r\n\r\n      // Create a map of saved users for quick lookup\r\n      const savedUserMap = new Map();\r\n\r\n      // Add unassigned users to map\r\n      latestConfig.unassignedUsers?.forEach((user) => {\r\n        savedUserMap.set(user.username, { ...user, assignment: \"unassigned\" });\r\n      });\r\n\r\n      // Add party members to map\r\n      latestConfig.parties?.forEach((party) => {\r\n        party.members?.forEach((user) => {\r\n          savedUserMap.set(user.username, { ...user, assignment: party.id });\r\n        });\r\n      });\r\n\r\n      // Update parties structure to match saved configuration\r\n      if (latestConfig.parties && latestConfig.parties.length > 0) {\r\n        parties.value = latestConfig.parties.map((party) => ({\r\n          id: party.id,\r\n          name: party.name || `Party ${party.id}`,\r\n          members: [],\r\n        }));\r\n      }\r\n\r\n      // Distribute users based on saved configuration\r\n      const newUnassigned = [];\r\n      const partyMembers = {};\r\n\r\n      // Initialize party members arrays\r\n      parties.value.forEach((party) => {\r\n        partyMembers[party.id] = [];\r\n      });\r\n\r\n      allUsers.forEach((user) => {\r\n        const savedUser = savedUserMap.get(user.username);\r\n        if (savedUser && savedUser.assignment !== \"unassigned\") {\r\n          // User was in a party\r\n          if (partyMembers[savedUser.assignment]) {\r\n            partyMembers[savedUser.assignment].push(user);\r\n          } else {\r\n            // Party doesn't exist anymore, put in unassigned\r\n            newUnassigned.push(user);\r\n          }\r\n        } else {\r\n          // User was unassigned or not found in saved config\r\n          newUnassigned.push(user);\r\n        }\r\n      });\r\n\r\n      // Apply the distribution\r\n      unassignedUsers.value = newUnassigned;\r\n      parties.value.forEach((party) => {\r\n        party.members = partyMembers[party.id] || [];\r\n      });\r\n\r\n      console.log(\"Party configuration loaded successfully\");\r\n    } else {\r\n      console.log(\"No saved party configuration found, using default\");\r\n      unassignedUsers.value = allUsers;\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error loading party configuration:\", error);\r\n    // Fallback to putting everyone in unassigned\r\n    unassignedUsers.value = allUsers;\r\n  }\r\n};\r\n\r\n// Convert users prop to the format needed for drag and drop\r\nconst populateUsers = async () => {\r\n  const allUsers = props.users\r\n    .map((user) => ({\r\n      username: user.user,\r\n      class: user.class || \"\",\r\n      level: user.level || \"\",\r\n    }))\r\n    .sort((a, b) => a.username.localeCompare(b.username));\r\n\r\n  // Try to load saved party configuration\r\n  await loadLatestPartyConfiguration(allUsers);\r\n};\r\n\r\n// Watch for changes in users prop\r\nwatch(\r\n  () => props.users,\r\n  async () => {\r\n    await populateUsers();\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\n// Ensure we load configuration when component mounts\r\nonMounted(async () => {\r\n  if (props.users.length > 0) {\r\n    await populateUsers();\r\n  }\r\n});\r\n\r\n// Function to add a new party group\r\nconst addParty = () => {\r\n  const newId = Math.max(...parties.value.map((p) => p.id)) + 1;\r\n  parties.value.push({\r\n    id: newId,\r\n    name: `Party ${newId}`,\r\n    members: [],\r\n  });\r\n};\r\n\r\n// Function to delete a party and move its members to unassigned (local only)\r\nconst deleteParty = (partyIndex) => {\r\n  const partyToDelete = parties.value[partyIndex];\r\n\r\n  // Move all party members to unassigned users\r\n  unassignedUsers.value.push(...partyToDelete.members);\r\n\r\n  // Remove the party from the array\r\n  parties.value.splice(partyIndex, 1);\r\n\r\n  console.log(\r\n    `Party \"${partyToDelete.name}\" deleted locally. Click Save to persist changes.`\r\n  );\r\n};\r\n\r\n// Function to save party configuration to database\r\nconst saveParties = async () => {\r\n  if (!db) {\r\n    console.error(\"Database not available\");\r\n    return;\r\n  }\r\n\r\n  saving.value = true;\r\n  try {\r\n    const now = new Date();\r\n    const timestamp = now.toISOString();\r\n    // Create Firebase-safe key by replacing invalid characters\r\n    const firebaseKey = timestamp.replace(/[.#$[\\]]/g, \"_\");\r\n\r\n    const partyData = {\r\n      timestamp,\r\n      unassignedUsers: unassignedUsers.value,\r\n      parties: parties.value.map((party) => ({\r\n        id: party.id,\r\n        name: party.name,\r\n        members: party.members,\r\n        memberCount: party.members.length,\r\n      })),\r\n    };\r\n\r\n    const partiesRef = dbRef(db, `parties/${firebaseKey}`);\r\n    await set(partiesRef, partyData);\r\n\r\n    console.log(\"Parties saved successfully!\", partyData);\r\n    // You could add a success notification here\r\n  } catch (error) {\r\n    console.error(\"Error saving parties:\", error);\r\n    // You could add an error notification here\r\n  } finally {\r\n    saving.value = false;\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-pool,\r\n.party-drop-zone {\r\n  min-height: 200px;\r\n  padding: 8px;\r\n\r\n  border-radius: 8px;\r\n  background-color: rgba(31, 158, 229, 0.05);\r\n}\r\n\r\n.user-card {\r\n  background-color: #0a1025 !important;\r\n  border: #1f9ee5 1px solid;\r\n\r\n  cursor: move;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.user-card:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: #1f9ee5 0px 0px 20px 2px;\r\n}\r\n\r\n.party-card {\r\n  background-color: #0a1025 !important;\r\n  border: #1f9ee5 2px ridge;\r\n  box-shadow: #1f9ee5 0px 0px 7px 2px;\r\n  height: 100%;\r\n}\r\n\r\n.party-card .v-card-title {\r\n  color: #eaf1ff;\r\n  font-size: 1.5rem;\r\n  padding: 16px;\r\n  border-bottom: 1px solid #1f9ee5;\r\n}\r\n.v-card {\r\n  color: #eaf1ff;\r\n  border: #1f9ee5 2px ridge;\r\n\r\n  background-color: transparent;\r\n  border-radius: 15px;\r\n}\r\n\r\n.custom-list-item {\r\n  margin: 8px;\r\n  border: #1f9ee5 1px solid;\r\n  border-radius: 8px;\r\n  background-color: rgba(31, 158, 229, 0.1) !important;\r\n}\r\n\r\nh2 {\r\n  color: #eaf1ff;\r\n  margin: 0;\r\n}\r\n\r\nhr {\r\n  border-color: #1f9ee5;\r\n  opacity: 0.5;\r\n  margin: 16px 0;\r\n}\r\n\r\n#user-pool-card {\r\n  width: 75%;\r\n}\r\n\r\n.user-details {\r\n  font-size: 0.85rem;\r\n  color: rgba(234, 241, 255, 0.7);\r\n  margin-left: 34px;\r\n}\r\n\r\n:deep(.v-icon) {\r\n  color: #1f9ee5 !important;\r\n}\r\n\r\n/* Force 3 cards per row - only for party columns */\r\n.v-row .v-col[cols=\"4\"] {\r\n  flex: 0 0 calc(33.333% - 8px) !important;\r\n  max-width: calc(33.333% - 8px) !important;\r\n  width: calc(33.333% - 8px) !important;\r\n}\r\n\r\n.party-title-container {\r\n  display: flex !important;\r\n  flex-direction: column !important;\r\n  align-items: center !important;\r\n  gap: 4px !important;\r\n}\r\n\r\n.party-name-field {\r\n  font-size: 1.5rem !important;\r\n  font-weight: bold !important;\r\n  text-align: center !important;\r\n  width: 100% !important;\r\n  min-width: 200px !important;\r\n}\r\n\r\n.party-name-field:deep(input) {\r\n  color: #eaf1ff !important;\r\n  text-align: center !important;\r\n  font-size: 1.5rem !important;\r\n  font-weight: bold !important;\r\n  width: 100% !important;\r\n  min-width: 200px !important;\r\n}\r\n\r\n.party-name-field:deep(.v-field__input) {\r\n  text-align: center !important;\r\n  padding: 0 8px !important;\r\n  width: 100% !important;\r\n  min-width: 200px !important;\r\n}\r\n\r\n.party-count {\r\n  color: rgba(234, 241, 255, 0.8) !important;\r\n  font-size: 0.9rem !important;\r\n  font-weight: normal !important;\r\n}\r\n</style>\r\n","import script from \"./PartyManager.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PartyManager.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PartyManager.vue?vue&type=style&index=0&id=b68cd1dc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b68cd1dc\"]])\n\nexport default __exports__","<template>\n  <v-app>\n    <v-app-bar class=\"px-0\">\n      <v-container id=\"app-bar\" fluid>\n        <div class=\"d-flex justify-space-between align-center my-3\">\n          <div class=\"d-flex align-center\">\n            <span v-if=\"currentUser\">Welcome, {{ currentUser.email }}</span>\n            <span v-else>Please sign in</span>\n          </div>\n          <v-btn\n            v-if=\"currentUser\"\n            @click=\"signOutUser\"\n            variant=\"tonal\"\n            class=\"sign-out-btn\"\n          >\n            Sign Out\n          </v-btn>\n        </div>\n        <v-tabs\n          v-if=\"currentUser\"\n          v-model=\"view\"\n          color=\"#1f9ee5\"\n          align-tabs=\"left\"\n          class=\"mt-8\"\n        >\n          <v-tab value=\"dkp-table\" class=\"custom-tab\">Guild Members</v-tab>\n          <v-tab value=\"parties\" class=\"custom-tab\">Party Manager</v-tab>\n        </v-tabs>\n      </v-container>\n    </v-app-bar>\n\n    <v-main class=\"mt-12\">\n      <v-container id=\"main-container\">\n        <LogIn v-if=\"!currentUser\" />\n        <div v-else-if=\"loading\" class=\"text-center pa-4\">\n          <v-progress-circular\n            indeterminate\n            color=\"#1f9ee5\"\n          ></v-progress-circular>\n          <p class=\"mt-2\" style=\"color: #eaf1ff\">Loading data...</p>\n        </div>\n        <DkpTable\n          v-else-if=\"view === 'dkp-table'\"\n          :users=\"users\"\n          :events=\"events\"\n          :event-types=\"eventTypes\"\n          :attendance-data=\"attendanceData\"\n          @user-updated=\"handleUserUpdate\"\n        />\n        <PartyManager\n          v-else-if=\"view === 'parties'\"\n          :users=\"users\"\n          @user-updated=\"handleUserUpdate\"\n        />\n      </v-container>\n    </v-main>\n  </v-app>\n</template>\n\n<script setup>\nimport { useAuth } from \"@/composables/useAuth\";\nimport { ref, inject, onMounted, watch } from \"vue\";\nimport { signOut } from \"firebase/auth\";\nimport { ref as dbRef, onValue, get } from \"firebase/database\";\nimport LogIn from \"./components/LogIn.vue\";\nimport DkpTable from \"./components/DkpTable.vue\";\nimport PartyManager from \"./components/PartyManager.vue\";\n\nconst { auth, currentUser } = useAuth();\nconst view = ref(\"dkp-table\");\n\n// Centralized data state\nconst users = ref([]);\nconst events = ref([]);\nconst eventTypes = ref([]);\nconst attendanceData = ref({});\nconst loading = ref(true);\n\n// Get database instance\nconst db = inject(\"db\");\n\n// Centralized data fetching\nconst fetchEvents = async () => {\n  if (!db) return;\n\n  try {\n    const eventsRef = dbRef(db, \"events/\");\n    const snapshot = await get(eventsRef);\n\n    if (snapshot.exists()) {\n      const eventsData = snapshot.val();\n      events.value = eventsData;\n\n      const types = new Set();\n      const attendance = {};\n\n      // First pass: collect all event types\n      Object.values(eventsData).forEach((event) => {\n        const title = event.messageTitle || \"Untitled Event\";\n        types.add(title);\n      });\n\n      // Second pass: count attendance for each user and event type\n      Object.values(eventsData).forEach((event) => {\n        const title = event.messageTitle || \"Untitled Event\";\n        if (event.usersAttended) {\n          Object.values(event.usersAttended).forEach((user) => {\n            if (!attendance[user.userId]) {\n              attendance[user.userId] = {};\n            }\n            attendance[user.userId][title] =\n              (attendance[user.userId][title] || 0) + 1;\n          });\n        }\n      });\n\n      eventTypes.value = Array.from(types);\n      attendanceData.value = attendance;\n    }\n  } catch (error) {\n    console.error(\"Error fetching events:\", error);\n  }\n};\n\nconst fetchUsers = async () => {\n  if (!db) return;\n\n  try {\n    const userRef = dbRef(db, \"dkp/\");\n    return onValue(\n      userRef,\n      (snapshot) => {\n        const data = snapshot.val();\n        if (data) {\n          const processedData = Object.entries(data).map(([key, value]) => {\n            const baseData = {\n              id: key,\n              ...value,\n            };\n\n            // Add attendance data for each event type\n            eventTypes.value.forEach((type) => {\n              baseData[`event_${type}`] =\n                attendanceData.value[key]?.[type] || 0;\n            });\n\n            return baseData;\n          });\n\n          users.value = processedData.sort((a, b) =>\n            a.user.localeCompare(b.user)\n          );\n        } else {\n          users.value = [];\n        }\n        loading.value = false;\n      },\n      (error) => {\n        console.error(\"Database read error:\", error);\n        loading.value = false;\n      }\n    );\n  } catch (error) {\n    console.error(\"Error setting up database listener:\", error);\n    loading.value = false;\n  }\n};\n\n// Initialize data when user is authenticated\nwatch(currentUser, async (user) => {\n  if (user) {\n    loading.value = true;\n    await fetchEvents();\n    await fetchUsers();\n  }\n});\n\nonMounted(async () => {\n  if (currentUser.value) {\n    loading.value = true;\n    await fetchEvents();\n    await fetchUsers();\n  }\n});\n\nconst signOutUser = async () => {\n  try {\n    await signOut(auth);\n    console.log(\"User signed out successfully.\");\n  } catch (error) {\n    console.error(\"Error signing out:\", error.message);\n  }\n};\n\n// Event handlers for child components\nconst handleUserUpdate = () => {\n  // Refresh data when a user is updated\n  fetchUsers();\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n}\n\n.error {\n  color: red;\n  font-weight: bold;\n}\n\n#main-container {\n  margin: 50px !important;\n  max-width: 100% !important;\n}\n\nmain {\n  background-color: #040c13;\n  min-height: 100vh;\n  padding-top: 50px;\n}\n\n#app-bar {\n  height: 100%;\n  width: 100%;\n  max-width: 100% !important;\n  margin: 0 !important;\n  padding: 0 !important;\n  background-color: #0a1025;\n  color: white;\n  border-bottom: #1f9ee5 2px ridge;\n  box-shadow: #1f9ee5 0px 0px 47px 2px;\n}\n\n.custom-tab {\n  color: #eaf1ff !important;\n  font-weight: bold;\n  font-size: 16px;\n}\n\n.custom-tab.v-tab--selected {\n  color: #1f9ee5 !important;\n}\n\n.v-tabs {\n  margin-bottom: -16px;\n  background-color: #0a1025;\n}\n\n.sign-out-btn {\n  color: #eaf1ff;\n  border: #1f9ee5 1px solid;\n}\n\n.v-toolbar__content {\n  overflow: visible !important;\n}\n</style>\n","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=283d1410&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from \"vue\";\nimport { createVuetify } from \"vuetify\";\nimport { aliases, mdi } from \"vuetify/iconsets/mdi\";\nimport \"@mdi/font/css/materialdesignicons.css\";\nimport \"vuetify/styles\";\nimport * as components from \"vuetify/components\";\nimport * as directives from \"vuetify/directives\";\nimport App from \"./App.vue\";\n\n// Assuming you've already run: npm install firebase\nimport { initializeApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getDatabase } from \"firebase/database\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyARl2Ai3AP9JPwKeZ-vustpvsC5RNW-YD4\",\n  authDomain: \"dkptracker-6121c.firebaseapp.com\",\n  databaseURL: \"https://dkptracker-6121c-default-rtdb.firebaseio.com\",\n  projectId: \"dkptracker-6121c\",\n  storageBucket: \"dkptracker-6121c.firebasestorage.app\",\n  messagingSenderId: \"1047085462747\",\n  appId: \"1:1047085462747:web:a5b6e403a81f29420fc8fe\",\n};\n\nconst firebaseApp = initializeApp(firebaseConfig);\nconst auth = getAuth(firebaseApp);\nconst dbInstance = getDatabase(firebaseApp);\n\nconst vuetify = createVuetify({\n  components,\n  directives,\n  icons: {\n    defaultSet: \"mdi\",\n    aliases,\n    sets: {\n      mdi,\n    },\n  },\n});\n\nconst app = createApp(App);\napp.provide(\"db\", dbInstance);\napp.provide(\"auth\", auth); // Provide auth to all components\n\napp.use(vuetify);\napp.mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdkp_tracker\"] = self[\"webpackChunkdkp_tracker\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(8604); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["currentUser","ref","authInitialized","authReadyResolver","authReady","Promise","resolve","useAuth","auth","inject","Error","value","onAuthStateChanged","user","class","_createBlock","_component_v_container","_createVNode","_component_v_card","width","_component_v_card_title","_cache","_createElementVNode","_component_v_card_text","_component_v_form","onSubmit","_withModifiers","_component_v_text_field","_ctx","email","$event","label","type","variant","password","_hoisted_1","_component_v_btn","onClick","signIn","color","size","block","signUp","errorMsg","_component_v_alert","text","defineComponent","name","setup","db","console","error","async","userCredential","createUserWithEmailAndPassword","currentUid","uid","log","userProfileRef","dbRef","set","createdAt","Date","toISOString","message","signInWithEmailAndPassword","__exports__","render","props","__props","emit","__emit","show","computed","get","modelValue","updateShow","localDkp","localUsername","localClass","localLevel","attendanceCount","attendanceByType","eventTypesToDisplay","fetchAttendanceCount","item","eventsRef","snapshot","exists","events","val","total","byType","forEach","Object","values","event","messageTitle","usersAttended","title","includes","hasAttended","some","userId","id","username","watch","newItem","dkp","level","immediate","saveChanges","isNew","userRef","Number","_component_v_dialog","_toDisplayString","_component_v_row","justify","_component_v_col","cols","number","_component_v_list_subheader","_component_v_table","dense","header","_withCtx","default","_createElementBlock","_Fragment","_renderList","count","key","_component_v_card_actions","_component_v_spacer","search","dialog","selectedItem","openModal","headers","baseHeaders","align","sortable","eventHeaders","map","handleUserSaved","_component_v_icon","_component_v_data_table","hover","items","users","density","_hoisted_2","_hoisted_3","_hoisted_4","icon","DkpModal","onSaved","saving","unassignedUsers","parties","members","loadLatestPartyConfiguration","partiesRef","latestQuery","query","orderByKey","limitToLast","data","latestConfig","savedUserMap","Map","assignment","party","length","newUnassigned","partyMembers","allUsers","savedUser","push","populateUsers","sort","a","b","localeCompare","onMounted","addParty","newId","Math","max","p","deleteParty","partyIndex","partyToDelete","splice","saveParties","now","timestamp","firebaseKey","replace","partyData","memberCount","fluid","loading","lg","_unref","draggable","group","element","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","style","index","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","view","eventTypes","attendanceData","fetchEvents","eventsData","types","Set","attendance","add","Array","from","fetchUsers","onValue","processedData","entries","baseData","signOutUser","signOut","handleUserUpdate","_component_v_app","_component_v_app_bar","_component_v_tabs","_component_v_tab","_component_v_main","_component_v_progress_circular","indeterminate","DkpTable","onUserUpdated","PartyManager","LogIn","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebaseApp","initializeApp","getAuth","dbInstance","getDatabase","vuetify","createVuetify","components","directives","icons","defaultSet","aliases","sets","mdi","app","createApp","App","provide","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","this","Function","e","window","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}